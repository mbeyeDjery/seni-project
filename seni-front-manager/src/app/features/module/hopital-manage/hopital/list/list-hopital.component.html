<p-toast />
<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#fff" type="ball-scale-multiple" [fullScreen]="true"><p style="color: white" > Veuillez patienter</p></ngx-spinner>
<div class="grid">
    <div class="col-12 md:col-6 lg:col-8">
        <div class="mb-4 zoominup animation-duration-300">
            <p-toolbar>
                <div class="p-toolbar-group-start">
                    <p-button (onClick)="nouveau()" label="Nouveau" size="small" icon="pi pi-plus-circle" class="mr-2" severity="success"/>
                    <p-button size="small" icon="pi pi-print" class="mr-2"/>
                    <p-button size="small" icon="pi pi-file-excel" class="mr-2"/>
                </div>
                <div class="p-toolbar-group-end">
                <span class="p-input-icon-left">
                    <i class="pi pi-search"></i>
                    <input pInputText placeholder="Recherche globale" />
                </span>
                </div>
            </p-toolbar>
        </div>

        <div class="card zoominup animation-duration-500">
            <p-table
                #table
                [value]="hopitaux"
                [(selection)]="hopitauxSelect"
                dataKey="idHopital"
                [rows]="5"
                [rowsPerPageOptions]="[5, 10, 30]"
                [paginator]="true"
                [globalFilterFields]="['codeHopital', 'nom']"
                [rowHover]="true"
                [tableStyle]="{'min-width': '50rem'}"
                styleClass="p-datatable-striped p-datatable-sm"
            >

                <ng-template pTemplate="header">
                    <tr>
                        <th style="width: 4rem"><p-tableHeaderCheckbox /></th>
                        <th pSortableColumn="codeHopital">
                            <div class="flex align-items-center">
                                Code
                                <p-sortIcon field="codeHopital" />
                            </div>
                        </th>
                        <th style="min-width:8rem" pSortableColumn="nom">
                            <div class="flex align-items-center">
                                Nom
                                <p-sortIcon field="nom" />
                            </div>
                        </th>
                        <th style="min-width:8rem" pSortableColumn="typeHopital.libelle">
                            <div class="flex align-items-center">
                                Type
                                <p-sortIcon field="typeHopital.libelle" />
                            </div>
                        </th>
                        <th>
                            <div class="flex align-items-center">
                                Téléphone
                            </div>
                        </th>
                        <th>
                            <div class="flex align-items-center">
                                Implantation
                            </div>
                        </th>
                        <th pSortableColumn="online">
                            <div class="flex align-items-center">
                                Visibilité
                                <p-sortIcon field="online" />
                            </div>
                        </th>
                        <th pSortableColumn="statut">
                            <div class="flex align-items-center">
                                Statut
                                <p-sortIcon field="statut" />
                            </div>
                        </th>
                        <th style="width:100px;"></th>
                    </tr>
                </ng-template>

                <ng-template pTemplate="body" let-hopital>
                    <tr>
                        <td>
                            <p-tableCheckbox [value]="hopital" />
                        </td>
                        <td>
                            {{ hopital.codeHopital }}
                        </td>
                        <td>
                            {{ hopital.nom }}
                        </td>
                        <td>
                            {{ hopital.typeHopital.libelle }}
                        </td>
                        <td>
                            {{ hopital.telephone }}
                        </td>
                        <td>
                            {{ hopital.ville.nom }}
                        </td>
                        <td>
                            <p-tag [value]="hopital.online ? 'En ligne' : 'Hors ligne'" [severity]="getOnline(hopital.online)" />
                        </td>
                        <td>
                            <p-tag [value]="hopital.statut" [severity]="getStatut(hopital.statut)" />
                        </td>
                        <td>
                            <p-button (onClick)="edition(hopital)" icon="pi pi-pencil" class="mr-2" severity="primary" [text]="true" [outlined]="true"/>
                            <p-button
                                    icon="pi pi-cog"
                                    [outlined]="true"
                                    [text]="true"
                                    [routerLink]="[hopital.idHopital, 'manage']"/>
                        </td>
                    </tr>
                </ng-template>

            </p-table>
        </div>
    </div>
    <div class="col-12 md:col-6 lg:col-4">
        <div class="grid zoominup animation-duration-300">
            <div class="col-12 lg:col-6 xl:col-6">
                <div class="card mb-0">
                    <div class="flex justify-content-between mb-3">
                        <div>
                            <span class="block text-500 font-medium mb-3">Orders</span>
                            <div class="text-900 font-medium text-xl">152</div>
                        </div>
                        <div class="flex align-items-center justify-content-center bg-blue-100 border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                            <i class="pi pi-shopping-cart text-blue-500 text-xl"></i>
                        </div>
                    </div>
                    <span class="text-green-500 font-medium">24 new </span>
                    <span class="text-500">since last visit</span>
                </div>
            </div>
            <div class="col-12 lg:col-6 xl:col-6">
                <div class="card mb-0">
                    <div class="flex justify-content-between mb-3">
                        <div>
                            <span class="block text-500 font-medium mb-3">Orders</span>
                            <div class="text-900 font-medium text-xl">152</div>
                        </div>
                        <div class="flex align-items-center justify-content-center bg-blue-100 border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                            <i class="pi pi-shopping-cart text-blue-500 text-xl"></i>
                        </div>
                    </div>
                    <span class="text-green-500 font-medium">24 new </span>
                    <span class="text-500">since last visit</span>
                </div>
            </div>
            <div class="col-12 lg:col-6 xl:col-6">
                <div class="card mb-0">
                    <div class="flex justify-content-between mb-3">
                        <div>
                            <span class="block text-500 font-medium mb-3">Orders</span>
                            <div class="text-900 font-medium text-xl">152</div>
                        </div>
                        <div class="flex align-items-center justify-content-center bg-blue-100 border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                            <i class="pi pi-shopping-cart text-blue-500 text-xl"></i>
                        </div>
                    </div>
                    <span class="text-green-500 font-medium">24 new </span>
                    <span class="text-500">since last visit</span>
                </div>
            </div>
            <div class="col-12 lg:col-6 xl:col-6">
                <div class="card mb-0">
                    <div class="flex justify-content-between mb-3">
                        <div>
                            <span class="block text-500 font-medium mb-3">Orders</span>
                            <div class="text-900 font-medium text-xl">152</div>
                        </div>
                        <div class="flex align-items-center justify-content-center bg-blue-100 border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                            <i class="pi pi-shopping-cart text-blue-500 text-xl"></i>
                        </div>
                    </div>
                    <span class="text-green-500 font-medium">24 new </span>
                    <span class="text-500">since last visit</span>
                </div>
            </div>
            @if (hopitauxSelect?.length > 0){
                <div class="col-12 lg:col-6 xl:col-12 zoominup animation-duration-300">
                    <p-card header="Advanced Card" subheader="Card Subheader">
                        <ng-template pTemplate="header">
                            <img alt="Card" src="https://primefaces.org/cdn/primeng/images/card-ng.jpg" />
                        </ng-template>
                        <p>
                            Lorem ipsum dolor sit amet...
                        </p>
                        <ng-template pTemplate="footer">
                            <div class="flex gap-3 mt-1">
                                <p-button label="Cancel" severity="secondary" class="w-full" styleClass="w-full" />
                                <p-button label="Save" class="w-full" styleClass="w-full" />
                            </div>
                        </ng-template>
                    </p-card>
                </div>
            }
        </div>

    </div>
</div>